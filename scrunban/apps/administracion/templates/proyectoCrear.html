{% extends "base" %}

{% block "include" %}{% endblock %}

{% block "title" %} {{ block.super }} | Perfil {% endblock %}

{% block "top_menu" %}

	{% if user.is_staff %}
		<li><a href="#">Administracion</a></li>
	{% endif %}

	<li class="dropdown">
	<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">{{ user.first_name }} {{ user.last_name }} <span class="caret"></span></a>
	<ul class="dropdown-menu">
		<li><a href="#">Mi Perfil</a></li>
		<li role="separator" class="divider"></li>
		<li><a href="{% url DEAUTH_NAME %}">Salir</a></li>
	</ul>

{% endblock %}

{% block "left_menu_title" %} Proyecto {% endblock %}

{% block "left_menu_options" %}
	<li class="active"><a href="{% url 'adm:proyecto_nuevo' %}">Nuevo Proyecto</a></li>
	<li class="active"><a href="{% url 'adm:proyecto_eliminar' %}">Eliminar Proyecto</a></li>
{% endblock %}

{% block "working_path" %}
	<li></li>
	<li>Proyecto</li>
	<li class="active">Nuevo Proyecto</li>
{% endblock %}

{% block "content" %}

	<div class="panel panel-default">

		<div class="panel-body">
<p>{{ form.fieldname.errors.as_text }}</p>
			<h1>Crear proyecto</h1>
        <form action="/adm/proyecto/nuevo" method="post">
            {% csrf_token %}
            {{ form.non_field_errors }}
            <div class="fieldWrapper">
                <label for='{{ form.nombre }}'>Nombre del proyecto:</label>
                {{ form.nombre }}
                {{ form.nombre.errors }}
            </div>
            <div class="fieldWrapper">
                <label for='{{ form.fechaInicio }}'>Fecha de inicio:</label>
                {{ form.fechaInicio }}
                Formato: AAAA-MM-DD
                {{ form.fechaInicio.errors }}
            </div>
            <div class="fieldWrapper">
                <label for='{{ form.fechaFinal }}'>Fecha de finalizacion:</label>
                {{ form.fechaFinal }}
                Formato: AAAA-MM-DD
                {{ form.fechaFinal.errors }}
            </div>
            <div class="fieldWrapper">
                <label for='{{ form.scrumMaster }}'>Scrum Master:</label>
                {{ form.scrumMaster }}
                <button type="button" data-toggle="modal" data-target=".scrumMaster-popup">Click para elegir un Usuario</button>
                {{ form.scrumMaster.errors }}
            </div>
            <div class="fieldWrapper">
                <label for='{{ form.productOwner }}'>Product Owner:</label>
                {{ form.productOwner }}
                <button type="button" data-toggle="modal" data-target=".productOwner-popup">Click para elegir un Usuario</button>
                {{ form.productOwner.errors }}
            </div>

            <input type="submit" value="Crear" />
        </form>


        <!-- popup box modal starts here -->
        <div class="modal fade scrumMaster-popup" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel-1" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h3 class="modal-title">
                            Seleccione el Scrum Master
                        </h3>
                    </div>
                    <div class="modal-body">
                        {% for user in user_list %}
                            <a data-dismiss="modal" id='addScrumMaster{{ forloop.counter }}' href='#'> {{ user.get_username }} </a><br>
                            <script>
                                document.getElementById('addScrumMaster{{ forloop.counter }}').addEventListener('click', function(){
                                    document.getElementById("id_scrumMaster").value = "{{ user.get_username }}"
                                });
                            </script>
                        {% endfor %}
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal-->
        <!-- popup box modal ends -->

        <!-- popup box modal starts here -->
        <div class="modal fade productOwner-popup" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel-1" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h3 class="modal-title">
                            Seleccione el Product Owner
                        </h3>
                    </div>
                    <div class="modal-body">
                        {% for user in user_list %}
                            <a data-dismiss="modal" id='addProductOwner{{ forloop.counter }}' href='#'> {{ user.get_username }} </a><br>
                            <script>
                                document.getElementById('addProductOwner{{ forloop.counter }}').addEventListener('click', function(){
                                    document.getElementById("id_productOwner").value = "{{ user.get_username }}"
                                });
                            </script>
                        {% endfor %}
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal-->
        <!-- popup box modal ends -->
		</div>
	</div>




{% endblock %}




